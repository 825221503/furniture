(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{"05b7":function(e,t,a){},"2b78":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"users"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("系统管理")]),a("el-breadcrumb-item",[e._v("顾客管理")])],1),a("el-card",[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"id"}}),a("el-table-column",{attrs:{prop:"nickName",label:"昵称"}}),a("el-table-column",{attrs:{prop:"avatarUrl",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{height:"120px"},attrs:{src:e.row.avatarUrl,alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"gender",label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.gender?a("span",[e._v("男")]):a("span",[e._v("女")])]}}])}),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}})],1),a("el-row",{staticStyle:{height:"40px"},attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-pagination",{attrs:{background:"",layout:"prev,pager,next",total:e.total,"page-size":e.pageSize,"current-page":e.page},on:{"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t}}})],1)],1)],1)},s=[],n={name:"user",data:function(){return{tableData:[],page:1,pageSize:1,total:0}},components:{},created:function(){},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.$http.get("/users",{params:{page:this.page,pageSize:this.pageSize}}).then((function(t){e.tableData=t.data.data,e.total=t.data.total}))}},watch:{page:function(e,t){this.fetchData()}}},o=n,l=a("2877"),i=Object(l["a"])(o,r,s,!1,null,"453b4329",null);t["default"]=i.exports},"6a53":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("router-view")],1)},s=[],n={name:"user",data:function(){return{}},components:{},created:function(){},mounted:function(){},methods:{}},o=n,l=a("2877"),i=Object(l["a"])(o,r,s,!1,null,"7af87f7b",null);t["default"]=i.exports},8639:function(e,t,a){"use strict";var r=a("f5e7"),s=a.n(r);s.a},b5d4:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("系统管理")]),a("el-breadcrumb-item",[e._v("密码修改")])],1),a("el-card",[a("el-col",{attrs:{span:8}},[a("el-form",{ref:"passwordForm",attrs:{"label-width":"100px",model:e.passwordForm,rules:e.rules,"status-icon":!0}},[a("el-form-item",{attrs:{label:"原始密码",prop:"oldPassword"}},[a("el-input",{attrs:{type:"password"},model:{value:e.passwordForm.oldPassword,callback:function(t){e.$set(e.passwordForm,"oldPassword",t)},expression:"passwordForm.oldPassword"}})],1),a("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[a("el-input",{attrs:{type:"password"},model:{value:e.passwordForm.newPassword,callback:function(t){e.$set(e.passwordForm,"newPassword",t)},expression:"passwordForm.newPassword"}})],1),a("el-form-item",{attrs:{label:"确认新密码",prop:"newPassword2"}},[a("el-input",{attrs:{type:"password"},model:{value:e.passwordForm.newPassword2,callback:function(t){e.$set(e.passwordForm,"newPassword2",t)},expression:"passwordForm.newPassword2"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handlechang}},[e._v("提交修改")])],1)],1)],1)],1)],1)},s=[],n={name:"password",data:function(){var e=this,t=function(e,t,a){var r=/^[0-9a-zA-Z]{6,}$/;r.test(t)?a():a(new Error("密码必须为6为以上的字母或数字组成 "))},a=function(t,a,r){a===e.passwordForm.newPassword?r():r(new Error("两次密码输入必须保持一致"))};return{passwordForm:{id:sessionStorage.getItem("id"),oldPassword:"",newPassword:"",newPassword2:""},rules:{oldPassword:{required:!0,message:"请输入原始密码",trigger:"blur"},newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:t,trigger:"blur"}],newPassword2:[{required:!0,message:"重新输入新密码",trigger:"blur"},{validator:a,trigger:"blur"}]}}},methods:{handlechang:function(){var e=this;this.$refs.passwordForm.validate((function(t){t&&e.$http.post("/api/admin/changePassword",e.passwordForm).then((function(t){200===t.data.code?(e.$refs.passwordForm.resetFields(),e.$message.success("修改成功")):e.$message.error(t.data.msg)}))}))}}},o=n,l=(a("8639"),a("2877")),i=Object(l["a"])(o,r,s,!1,null,"f6351f9e",null);t["default"]=i.exports},d2c9:function(e,t,a){"use strict";var r=a("05b7"),s=a.n(r);s.a},f5e7:function(e,t,a){},f603:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("系统管理")]),a("el-breadcrumb-item",[e._v("管理员管理")])],1),a("el-card",[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"查看",name:"show"}},[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"id",prop:"id",align:"center"}}),a("el-table-column",{attrs:{label:"账号",prop:"username",align:"center"}}),a("el-table-column",{attrs:{label:"状态",prop:"status",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1==t.row.status?"白名单":"黑名单"))]}}])}),a("el-table-column",{attrs:{label:"上次登录时间",prop:"login_time",align:"center"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"create_time",align:"center"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleChange(t.row.id,0)}}},[e._v("加入黑名单")]):a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleChange(t.row.id,1)}}},[e._v("加入白名单")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDelete(t.row.id)}}},[e._v("删除")])]}}])})],1),a("el-row",{staticStyle:{height:"40px"},attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.pageSize,total:e.total,"current-page":e.page},on:{"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t}}})],1)],1),a("el-tab-pane",{attrs:{label:"添加",name:"add"}},[a("el-col",{attrs:{span:8}},[a("el-form",{ref:"addForm",attrs:{"label-width":"80px",model:e.addForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"账号",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-radio",{attrs:{label:0,prop:"status"},model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}},[e._v("黑名单")]),a("el-radio",{attrs:{label:1,prop:"status"},model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}},[e._v("白名单")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1)],1)],1)],1)],1)},s=[],n={data:function(){return{activeName:"show",tableData:[],url:"/manager",total:0,pageSize:5,page:1,addForm:{username:"",status:1},rules:{username:{required:!0,message:"请输入用户名",trigger:"blur"}}}},methods:{fetchData:function(){var e=this;this.$http.get(this.url,{params:{page:this.page,pageSize:this.pageSize,role:2}}).then((function(t){200==t.data.code?(e.tableData=t.data.data,e.total=t.data.total):e.$message.error("获取失败")}))},handleAdd:function(){var e=this;this.$refs.addForm.validate((function(t){t?e.$http.post(e.url,e.addForm).then((function(t){200===t.data.code&&(e.$message.success("添加成功"),e.$refs.addForm.resetFields(),e.activeName="show",e.fetchData())})):e.$message.error("添加失败")}))},handleChange:function(e,t){var a=this;this.$http.put(this.url+"/"+e,{status:t}).then((function(e){console.log(e),200===e.data.code?(a.$message.success("修改成功"),a.fetchData()):a.$message.error("修改失败")}))},handleDelete:function(e){var t=this;this.$confirm("此操作将删除当前账户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){t.$http.delete(t.url+"/"+e).then((function(e){200===e.data.code&&(t.$message.success("删除成功"),t.fetchData())}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}},watch:{page:function(e,t){this.fetchData()}},mounted:function(){this.fetchData()}},o=n,l=(a("d2c9"),a("2877")),i=Object(l["a"])(o,r,s,!1,null,"5febd5d7",null);t["default"]=i.exports}}]);
//# sourceMappingURL=user.733702e1.js.map